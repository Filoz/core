
{% for contentType, relation in record.definition.relations %}

    {% set options = related_options(contentType, relation.order|default(), relation.format|default(), relation.required) %}
    {% set value = record|related_values(contentType) %}

    {# Set the prefix and postfix attributes #}
    {% set prefix = prefix|default(relation['prefix']|default) %}
    {% if prefix and not (prefix starts with '<p' or prefix starts with '<span' or prefix starts with '<div') %}
        {% set prefix = '<div id="' ~ contentType ~ '_prefix" class="form--helper">' ~ prefix|markdown ~ '</div>' %}
    {% endif %}

    {% set postfix = postfix|default(relation['postfix']|default) %}
    {% if postfix and not (postfix starts with '<p' or postfix starts with '<span' or postfix starts with '<div') %}
        {% set postfix = '<div id="' ~ contentType ~ '_postfix" class="form--helper">' ~ postfix|markdown ~ '</div>' %}
    {% endif %}

    <div class="form-group is-normal">
        {{ prefix|raw }}

        {% include '@bolt/_partials/fields/_label.html.twig' with {
            'id': 'relationship-' ~ contentType,
            'label': relation.label,
            'required': relation.required
        } %}

        <div>
            <editor-select
                    :value="{{ value }}"
                    :name="'relationship[{{ contentType }}]'"
                    :id="'relationship-{{ contentType }}'"
                    :options="{{ options }}"
                    :multiple="{{ relation.multiple ? 'true' : 'false' }}"
                    :taggable=false
                    :allowempty="{{ relation.required ? 'false' : 'true' }}"
                    :searchable=true
            ></editor-select>
        </div>

        {{ postfix|raw }}

    </div>

{% endfor %}

